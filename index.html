<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Idle Gaem</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link id="theme-stylesheet" rel="stylesheet" href="theme.dark.css" />
</head>
<body>
  <header>
    <h1>Gaem</h1>
    <div id="resource-display" aria-live="polite">Resources: 0</div>
    <div id="rps-display" class="rps-display" aria-hidden="true">Resources/s: 0</div>
  </header>

  <main>
    <div id="start-modal" class="start-modal" role="dialog" aria-modal="true" hidden>
      <div class="modal-content">
        <h2>Welcome to Gaem!</h2>
        <p>Hereâ€™s some info to get you started:</p>
        <ul style="text-align:left;">
          <li><a href="https://example.com/guide" target="_blank">Full Guide</a><br /><a>(Trust me you will need it)</a></li>
          <li><a href="https://example.com/discord" target="_blank">Join Discord</a></li>
        </ul>
        <label style="display:flex;align-items:center;gap:6px;justify-content:center;margin-top:12px;">
          <input type="checkbox" id="dont-show-again"> Don't show this again
        </label>
        <button id="start-close-btn" class="upgrade">Close</button>
      </div>
    </div>

    <div id="options-modal" class="modal" hidden>
      <div class="modal-content">
        <h2>Theme</h2>

        <label class="switch">
          <input type="checkbox" id="theme-toggle">
          <span class="slider"></span>
        </label>
        <p id="theme-label">Dark Mode</p>

        <div style="margin-top:12px;">
          <button id="options-close-btn">Close</button>
        </div>
      </div>
    </div>


    <div class="button-stack" style="display:flex;flex-direction:column;gap:12px;align-items:center;">
      <button id="collect-btn" aria-label="Collect resources">Collect</button>
    </div>

    <section class="upgrades" aria-label="Upgrades">
      <button id="buy-upgrade" class="upgrade" aria-label="Upgrade gain">Upgrade Gain</button>
      <button id="upgrade-auto" class="upgrade">Auto Collect</button>
      <button id="upgrade-double" class="upgrade">Double Gain</button>
      <button id="upgrade-triple" class="upgrade">Triple Gain</button>
      <button id="upgrade-boost" class="upgrade">Boost</button>
      <button id="upgrade-lucky" class="upgrade">Lucky Gain</button>
      <button id="upgrade-new-age" class="upgrade">|</button>

      <svg id="svg-lines" aria-hidden="true" preserveAspectRatio="none"></svg>
    </section>

    <div id="feedback" class="feedback" aria-live="polite"></div>
  </main>

  <div id="confirm-bar" class="confirm-bar" hidden>
    <span>Are you sure you want to do that?</span>
    <div class="confirm-actions">
      <button id="confirm-yes">Yes</button>
      <button id="confirm-no">No</button>
    </div>
  </div>

  <div class="corner-group" role="region" aria-label="Save and options">
    <button id="save-btn">Save</button>
    <button id="load-btn">Load</button>
    <button id="reset-btn">Reset</button>
    <button id="options-btn">Options</button>
  </div>

  <script src="js/game.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/ui.js" id="ui-script" defer></script>
  <script src="js/options.js"></script>
  <script src="js/main.js"></script>
  <script src="js/debugger.js"></script>
  <script>
    window.onload = () => {
    if (state && state.beginningfinished === true) {
      // create overlay
      const overlay = document.createElement("div");
      overlay.style.position = "fixed";
      overlay.style.top = "0";
      overlay.style.left = "0";
      overlay.style.width = "100vw";
      overlay.style.height = "100vh";
      overlay.style.backgroundColor = "rgba(0, 0, 0, 0.9)";
      overlay.style.display = "flex";
      overlay.style.justifyContent = "center";
      overlay.style.alignItems = "center";
      overlay.style.zIndex = "999999";

      const box = document.createElement("div");
      box.style.background = "#222";
      box.style.color = "#fff";
      box.style.padding = "30px";
      box.style.borderRadius = "15px";
      box.style.textAlign = "center";
      box.style.fontSize = "1.5rem";
      box.style.maxWidth = "400px";
      box.style.boxShadow = "0 0 15px rgba(0,0,0,0.6)";
      box.textContent = "Ha! You're not spose to be here!";

      const btn = document.createElement("button");
      btn.textContent = "Go to Chapter 1";
      btn.style.marginTop = "20px";
      btn.style.padding = "10px 20px";
      btn.style.fontSize = "1rem";
      btn.style.border = "none";
      btn.style.borderRadius = "8px";
      btn.style.background = "#2f8ef7";
      btn.style.color = "#fff";
      btn.style.cursor = "pointer";
      btn.onclick = () => {
        window.location.href = "chapter1/index.html";
      };

      box.appendChild(document.createElement("br"));
      box.appendChild(btn);
      overlay.appendChild(box);
      document.body.appendChild(overlay);

      // ðŸ”¹ Hide overlay only when Ctrl + [ is pressed
      window.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "[") {
          overlay.style.display = "none";
        }
      });
    }
  };
</script>
</body>
</html>
